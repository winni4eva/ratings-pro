{"version":3,"sources":["admin2/branch/branchSurveys/branch-surveys.component.ts"],"names":[],"mappings":"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","file":"admin2/branch/branchSurveys/branch-surveys.component.js","sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit, OnDestroy  } from '@angular/core';\r\n///import { StorageService } from '../../shared/storage/storage.service';\r\nimport { BranchService } from '../branch.service';\r\nimport { SurveyService } from '../../survey/survey.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport {NotificationsService} from 'angular2-notifications';\r\n\r\n@Component({\r\n    selector: 'my-branch-surveys',\r\n    template:\r\n   `\r\n        <simple-notifications [options]=\"_options\"></simple-notifications>\r\n\r\n        <my-content title=\"Branch Surveys\">\r\n\r\n            <div class=\"places-buttons\">\r\n\r\n                <div class=\"img-thumbnail\" style=\"width:200%\">\r\n                    \r\n                    <div class=\"row\" style=\"width:100%\">\r\n                        <h5 *ngIf=\"_branch?.name\" class=\"text-center\">{{_branch?.name}} Branch Surveys</h5>\r\n                    </div>\r\n                    \r\n                    <p *ngIf=\"_branch?.surveys.length == 0\" class=\"text-center\">This branch  has no surveys</p>\r\n\r\n                    <div *ngFor=\"let survey of _branch?.surveys\">\r\n                        <div class=\"col-md-2\" style=\"margin-right:1px !important\">\r\n                            \r\n                            <div class=\"pull-right\">\r\n                                <span (click)=\"removeSurvey(survey?.id)\">\r\n                                    <i style=\"font-size:30px;cursor:pointer !important\" class=\"pe-7s-close\"></i>\r\n                                </span>\r\n                            </div>\r\n\r\n                            <a class=\"btn btn-default btn-block\" style=\"border:2px solid black !important\">{{survey?.title}}</a>\r\n                        \r\n                        </div>\r\n                    </div>\r\n                \r\n                </div>\r\n\r\n                <div class=\"img-thumbnail\" style=\"width:200%\">\r\n                    \r\n                    <div class=\"row\">\r\n                        <h5 class=\"text-center\">Available Surveys</h5>\r\n                    </div>\r\n                    \r\n                    <div *ngFor=\"let survey of _surveys\">\r\n                        <div class=\"col-md-2\" style=\"margin-right:1px !important\">\r\n                            <a class=\"btn btn-default btn-block\" \r\n                            (click)=\"addBranchSurvey(survey?.id)\"\r\n                            style=\"border:2px solid black !important\">\r\n                            {{survey?.title}}\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                \r\n                </div>\r\n\r\n            </div>\r\n\r\n        </my-content>\r\n    `\r\n})\r\n\r\nexport class BranchSurveyComponent implements OnInit, OnDestroy {\r\n\r\n    private _selectedBranchId;\r\n\r\n    private _branch;\r\n\r\n    private _branches;\r\n\r\n    private _surveys;\r\n\r\n    private _options = {\r\n        position: [\"top\", \"right\"],\r\n        timeOut: 9000,\r\n        lastOnBottom: true\r\n    };\r\n\r\n    constructor(\r\n        private _branchService: BranchService,\r\n        private _surveyService: SurveyService,\r\n        private activeRoute: ActivatedRoute,\r\n        private _notification: NotificationsService){}\r\n\r\n    ngOnInit() {\r\n\r\n        this.activeRoute.params.subscribe(params => this._selectedBranchId = params['branchId'] );\r\n\r\n        this.getBranches();\r\n\r\n        this._surveyService.getSurveys().subscribe(\r\n                result => this._surveys = result.surveys,\r\n                error => console.log(error)\r\n        );\r\n    \r\n    }\r\n\r\n    addBranchSurvey(surveyId){\r\n        this._branchService.saveBranchSurveys(surveyId, this._selectedBranchId).subscribe(\r\n                result => {\r\n                    this._notification.success('Success', result.success)\r\n                    this.getBranches();\r\n                },\r\n                error => console.log(error)\r\n        );\r\n    }\r\n\r\n    getBranches(){\r\n        this._branchService.getBranches().subscribe(\r\n                result => {\r\n                    this._branches = result.branches;\r\n                    for(let branch of this._branches){\r\n                        if(branch.id == this._selectedBranchId) this._branch = branch;\r\n                    }\r\n                },\r\n                error => console.log(error)\r\n        );\r\n    }\r\n\r\n    removeSurvey(surveyId){\r\n        this._branchService.removeBranchSurveys(surveyId, this._selectedBranchId).subscribe(\r\n                result => {\r\n                    this._notification.success('Success', result.success);\r\n                    this.getBranches();\r\n                },\r\n                error => console.log(error)\r\n        );\r\n    }\r\n\r\n    ngOnDestroy(){\r\n      \r\n    }\r\n }\r\n"],"sourceRoot":"/source/"}